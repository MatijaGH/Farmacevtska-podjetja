DROP TABLE IF EXISTS igralec CASCADE;
DROP TABLE IF EXISTS prestop CASCADE;
DROP TABLE IF EXISTS klub CASCADE;
DROP TABLE IF EXISTS agent CASCADE;

CREATE TABLE agent (
	id SERIAL PRIMARY KEY,
	ime VARCHAR(50),
	priimek VARCHAR(50)
);


CREATE TABLE klub (
	id SERIAL PRIMARY KEY,
	Ime VARCHAR(50),
	Naslov VARCHAR(50)
);

CREATE TABLE prestop (
	id SERIAL PRIMARY KEY,
	cena INT,
	datum DATE,
	stanje BOOLEAN,
	igralec FOREIGN KEY REFERENCES igralec,
	iz_kluba FOREIGN KEY REFERENCES klub,
	v_klub FOREIGN KEY REFERENCES klub,
	agent FOREIGN KEY REFERENCES agent
);

CREAT TABLE igralci (
	id SERIAL PRIMARY KEY,
	ime VARCHAR(50),
	priimek VARCHAR(50),
	država VARCHAR(50),
	plača INT,
	vrednost INT,
	klub REFERENCES FOREIGN KEY klub,
	agent REFERENCES FOREIGN KEY agent
);


GRANT ALL ON ALL TABLES IN SCHEMA public TO MatijaGH;
GRANT ALL ON ALL TABLES IN SCHEMA public TO oskarkregar;
GRANT ALL ON ALL TABLES IN SCHEMA public TO matevzraspet;
GRANT ALL ON ALL SEQUENCES IN SCHEMA public TO MatijaGH;
GRANT ALL ON ALL SEQUENCES IN SCHEMA public TO matevzraspet;
GRANT ALL ON ALL SEQUENCES IN SCHEMA public TO oskarkregar;


/*Grant za javnost*/
GRANT CONNECT ON DATABASE sem_2019
GRANT SELECT ON ALL TABLES IN SCHEMA public TO javnost;
GRANT SELECT, UPDATE, INSERT ON ALL TABLES IN SCHEMA public TO javnost;
GRANT ALL ON ALL SEQUENCES IN SCHEMA public TO javnost;
